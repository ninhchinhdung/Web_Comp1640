<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <%- include('../partials/header') %>

        <main class="container">
            <div class="form-container">
                <h1>
                    <%= title %>
                </h1>

                <% if (typeof error !=='undefined' && error) { %>
                    <div class="alert alert-danger">
                        <%= error %>
                    </div>
                    <% } %>

                        <form action="<%= action %>" method="<%= method %>" class="form">
                            <div class="form-group">
                                <label for="name">Product Name *</label>
                                <input type="text" id="name" name="name" value="<%= product.name || '' %>" required
                                    minlength="2" maxlength="200">
                            </div>

                            <div class="form-group">
                                <label for="description">Description *</label>
                                <textarea id="description" name="description" rows="4" required
                                    maxlength="1000"><%= product.description || '' %></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="price">Price ($) *</label>
                                    <input type="number" id="price" name="price" value="<%= product.price || '' %>"
                                        step="0.01" min="0" required>
                                </div>

                                <div class="form-group">
                                    <label for="stock">Stock Quantity *</label>
                                    <input type="number" id="stock" name="stock" value="<%= product.stock || 0 %>"
                                        min="0" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="category">Category *</label>
                                <select id="category" name="category" required>
                                    <option value="">Select a category</option>
                                    <option value="Electronics" <%=product.category==='Electronics' ? 'selected' : '' %>
                                        >Electronics</option>
                                    <option value="Clothing" <%=product.category==='Clothing' ? 'selected' : '' %>
                                        >Clothing</option>
                                    <option value="Food" <%=product.category==='Food' ? 'selected' : '' %>>Food</option>
                                    <option value="Books" <%=product.category==='Books' ? 'selected' : '' %>>Books
                                    </option>
                                    <option value="Home" <%=product.category==='Home' ? 'selected' : '' %>>Home</option>
                                    <option value="Sports" <%=product.category==='Sports' ? 'selected' : '' %>>Sports
                                    </option>
                                    <option value="Other" <%=product.category==='Other' || !product.category
                                        ? 'selected' : '' %>>Other</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="imageUrl">Image URL</label>
                                <input type="url" id="imageUrl" name="imageUrl" value="<%= product.imageUrl || '' %>"
                                    placeholder="/images/default-product.jpg">
                                <small>Leave blank to use default image</small>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="isAvailable" <%=(product.isAvailable !==false)
                                        ? 'checked' : '' %>
                                    >
                                    Available for sale
                                </label>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <%= product._id ? 'Update Product' : 'Create Product' %>
                                </button>
                                <a href="/products" class="btn btn-secondary">Cancel</a>
                            </div>
                        </form>
            </div>
        </main>

        <%- include('../partials/footer') %>

            <script src="/js/main.js"></script>
</body>

</html>